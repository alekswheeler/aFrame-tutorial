<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<script src="https://aframe.io/releases/1.6.0/aframe.min.js" defer></script>
	<script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js" defer></script>
</head>
<body style="margin : 0px; overflow: hidden;">
	<a-scene
	  	arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;"
  		embedded
  		renderer="logarithmicDepthBuffer: true;"
  		vr-mode-ui="enabled: false"
  		gesture-detector
  		id="scene"
	>
		<a-marker type="pattern" url="./card.patt">
			<a-entity 
				position="0 0 0"
				scale="1 1 1"
				rotation="-90 0 0"
				gltf-model="./water_jug.gltf"
				class="clickable"
				gesture-handler="minScale: 0.25; maxScale: 10"
				>
			</a-entity>
		</a-marker>
	</a-scene>
	<script>
		var sceneEl = document.getElementById("scene");
		var isMarkerVisible = false;

		sceneEl.addEventListener("markerFound", (e) => {
			isMarkerVisible = true;
		});

		sceneEl.addEventListener("markerLost", (e) => {
			isMarkerVisible = false;
		});

		function handleRotation(event) {
			if (isMarkerVisible) {
			el.object3D.rotation.y +=
				event.detail.positionChange.x * rotationFactor;

			el.object3D.rotation.x +=
				event.detail.positionChange.y * rotationFactor;
			}
		}

		function handleScale(event) {
			if (isMarkerVisible) {
				this.scaleFactor *=
					1 + event.detail.spreadChange / event.detail.startSpread;

				this.scaleFactor = Math.min(
					Math.max(this.scaleFactor, this.data.minScale),
					this.data.maxScale
				);

				el.object3D.scale.x = scaleFactor * initialScale.x;
				el.object3D.scale.y = scaleFactor * initialScale.y;
				el.object3D.scale.z = scaleFactor * initialScale.z;
			}
		}
	</script>
</body>
</html>